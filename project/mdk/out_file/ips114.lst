C251 COMPILER V5.60.0,  ips114                                                             10/05/25  10:27:14  PAGE 1   


C251 COMPILER V5.60.0, COMPILATION OF MODULE ips114
OBJECT MODULE PLACED IN .\out_file\ips114.obj
COMPILER INVOKED BY: D:\C251\C251\BIN\C251.EXE ..\user\ips114.c LARGE NOALIAS FLOAT64 WARNINGLEVEL(3) OPTIMIZE(2,SIZE) B
                    -ROWSE INCDIR(..\..\libraries\zf_common;..\..\libraries\zf_components;..\..\libraries\zf_device;..\..\libraries\zf_driver
                    -;..\user;..\code) DEBUG PRINT(.\out_file\ips114.lst) TABS(2) OBJECT(.\out_file\ips114.obj) 

stmt  level    source

    1          #include "ips114.h"
    2          
    3          uint8 page_num = 0; //页面
    4          
    5          /**
    6            * @brief 显示单位
    7            * @param 无
    8            * @return 无
    9            */
   10          void IPS114_Show_Unit(void) 
   11          {       
   12   1          switch(page_num)
   13   1          {
   14   2            case 0:
   15   2            {
   16   3              //加速度
   17   3              ips114_set_color(RGB565_BLUE,RGB565_WHITE);
   18   3              ips114_show_string(0,16*0,"Acc: x,y,z");
   19   3              ips114_show_char(60,16*1,'g');
   20   3              ips114_show_char(140,16*1,'g');
   21   3              ips114_show_char(220,16*1,'g');
   22   3      
   23   3              //角速度
   24   3              ips114_set_color(RGB565_PURPLE,RGB565_WHITE);
   25   3              ips114_show_string(0,16*2,"Gyro: x,y,z");
   26   3              ips114_show_char(60,16*3,'d');
   27   3              ips114_show_char(140,16*3,'d');
   28   3              ips114_show_char(220,16*3,'d');
   29   3      
   30   3              //GPS
   31   3              ips114_set_color(RGB565_PINK,RGB565_WHITE);
   32   3              ips114_show_string(0, 16*5, "S: ");//定位状态
   33   3              ips114_show_string(50, 16*5,"N: ");//卫星数目
   34   3              ips114_show_string(130, 16*5,"H: ");//GPS天线高度
   35   3      
   36   3              ips114_show_string(0, 16*6, "Lat:");//纬度
   37   3              ips114_show_string(130, 16*6, "Lon:");//经度
   38   3              ips114_show_string(0, 16*7, "v:");//速度
   39   3              ips114_show_string(130, 16*7, "d:");//方向
   40   3              
   41   3              ips114_set_color(RGB565_RED,RGB565_WHITE);
   42   3               break;
   43   3            }
   44   2            case 1:
   45   2            {
   46   3              //角度环
   47   3              ips114_set_color(RGB565_BLUE,RGB565_WHITE);
   48   3              ips114_show_string(0,16*0,"Angle");
   49   3              ips114_show_char(0,16*1,'P');
   50   3              ips114_show_char(40,16*1,'I');
   51   3              ips114_show_char(120,16*1,'D');
   52   3      
   53   3              //角速度
   54   3              ips114_set_color(RGB565_PURPLE,RGB565_WHITE);
   55   3              ips114_show_string(0,16*2,"Velocity");
   56   3              ips114_show_char(0,16*3,'P');
   57   3              ips114_show_char(80,16*3,'I');
C251 COMPILER V5.60.0,  ips114                                                             10/05/25  10:27:14  PAGE 2   

   58   3              ips114_show_char(160,16*3,'D');
   59   3              break;
   60   3            }
   61   2            case 3:
   62   2            {
   63   3              ips114_show_string(0,16*0,"Waiting for erase...");
   64   3              ips114_show_string(0, 16*1, "N:");
   65   3              ips114_show_string(50, 16*1, "T:");
   66   3            }
   67   2          }
   68   1      
   69   1      }
   70          /**
   71            * @brief 显示信息
   72            * @param 无
   73            * @return 无
   74            */
   75          void IPS114_Show_Info(void)
   76          {   
   77   1          //循环变量
   78   1          unsigned char index=0;
   79   1          if(key1_flag)
   80   1          {
   81   2            page_num++; 
   82   2            page_num %= 3;
   83   2            ips114_clear(RGB565_WHITE);
   84   2            IPS114_Show_Unit();//显示单位
   85   2          }
   86   1          switch(page_num)
   87   1          {
   88   2            case 0:
   89   2            {
   90   3              //IMU
   91   3              ips114_show_float(100,0,velocity,2,3);
   92   3              for(index=0;index<3;index++)
   93   3              {
   94   4                ips114_show_float(80*index, 16*1 ,imu_acc[index],2,3);//加速度信息 字符8x16
   95   4                ips114_show_float(80*index, 16*3 ,imu_gyro[index],2,3);//角速度信息
   96   4              }
   97   3              switch(curState)
   98   3              {
   99   4                case State_Init:ips114_show_string(0,16*4,"Init  ");break;
  100   4                case State_Unlock:ips114_show_string(0,16*4,"Unlock");break;
  101   4                case State_Yaw_Init:ips114_show_string(0,16*4,"YawInit");break;
  102   4                case State_Subject_1:ips114_show_string(0,16*4,"Object");break;
  103   4              }
  104   3              //GPS
  105   3              if(gps_date_ready)
  106   3              {
  107   4                //显示GPS位置信息
  108   4                ips114_show_uint8(15, 16*5, gps_tau1201.state);
  109   4                ips114_show_uint8(70, 16*5, gps_tau1201.satellite_used);
  110   4                ips114_show_float(160, 16*5, gps_tau1201.height, 4, 6);
  111   4                  
  112   4                ips114_show_float(30, 16*6, gps_tau1201.latitude, 4, 6);
  113   4                ips114_show_float(160, 16*6, gps_tau1201.longitude, 4, 6);
  114   4                ips114_show_float(30, 16*7, gps_tau1201.speed, 4, 6);
  115   4                ips114_show_float(160, 16*7, gps_tau1201.direction, 4, 6);
  116   4              }
  117   3              // 航向角
  118   3              ips114_show_float(160,64,yaw,4,4);
  119   3              break;
  120   3            }
  121   2            case 1:
  122   2            {
  123   3              ips114_show_float(10, 16*1 ,angle_KP,3,3);
C251 COMPILER V5.60.0,  ips114                                                             10/05/25  10:27:14  PAGE 3   

  124   3              ips114_show_float(90, 16*1 ,angle_KI,3,3);
  125   3              ips114_show_float(170, 16*1 ,angle_KD,3,3);
  126   3              
  127   3              ips114_show_float(10, 16*3 ,velocity_KP,3,3);
  128   3              ips114_show_float(90, 16*3 ,velocity_KI,3,3);
  129   3              ips114_show_float(170, 16*3 ,velocity_KD,3,3);
  130   3              
  131   3              break;
  132   3            }
  133   2            case 2:
  134   2            {
  135   3              ips114_show_uint8(20, 16*1, write_index);
  136   3              ips114_show_uint8(70, 16*1, cur_object_num);
  137   3            }
  138   2          }
  139   1      
  140   1      }


Module Information          Static   Overlayable
------------------------------------------------
  code size            =      1508     ------
  ecode size           =    ------     ------
  data size            =    ------     ------
  idata size           =    ------     ------
  pdata size           =    ------     ------
  xdata size           =         2     ------
  xdata-const size     =    ------     ------
  edata size           =    ------     ------
  bit size             =    ------     ------
  ebit size            =    ------     ------
  bitaddressable size  =    ------     ------
  ebitaddressable size =    ------     ------
  far data size        =    ------     ------
  huge data size       =    ------     ------
  const size           =    ------     ------
  hconst size          =       128     ------
End of Module Information.


C251 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
